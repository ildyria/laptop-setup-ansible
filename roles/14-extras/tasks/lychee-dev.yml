---
- name: Install Lychee files
  ansible.builtin.import_tasks: '{{ role_path }}/tasks/lychee-dev/1-files.yml'

- name: Setup Lychee database
  ansible.builtin.import_tasks: '{{ role_path }}/tasks/lychee-dev/2-db.yml'

- name: Setup Lychee env
  ansible.builtin.import_tasks: '{{ role_path }}/tasks/lychee-dev/3-env.yml'

- name: Apply Lychee migration
  ansible.builtin.import_tasks: '{{ role_path }}/tasks/lychee-dev/4-artisan.yml'

- name: Update owner & permissions of {{ home_dir }}/Documents/Projects/Lychee
  become: true
  ansible.builtin.file:
    path: '{{ home_dir }}/Documents/Projects/Lychee'
    owner: '{{ linux_user }}'
    group: www-data
    mode: '0775'
    recurse: true

- name: Setup lychee.test domain
  ansible.builtin.import_tasks: '{{ role_path }}/tasks/lychee-dev/5-domain.yml'
